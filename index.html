<!DOCTYPE html>
<html lang="sr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>PROHORECA | Ultra</title>
    
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0e0e0f">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/4345/4345573.png">
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=IBM+Plex+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg: #09090b;
            --surface: rgba(22, 22, 24, 0.8);
            --card: rgba(30, 30, 33, 0.7);
            --border: rgba(255, 255, 255, 0.1);
            --accent: #f5a623;
            --text: #f4f4f5;
            --muted: #a1a1aa;
            --safe-bottom: env(safe-area-inset-bottom, 0px);
            --safe-top: env(safe-area-inset-top, 0px);
            --green: #10b981;
            --red: #ef4444;
            --blue: #3b82f6;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
        
        body {
            background: radial-gradient(circle at top right, #1c1c1f, #09090b);
            color: var(--text);
            font-family: 'IBM Plex Sans', sans-serif;
            overflow: hidden;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .bebas { font-family: 'Bebas Neue', sans-serif; letter-spacing: 2px; }

        /* --- HEADER --- */
        header {
            padding: calc(20px + var(--safe-top)) 20px 15px;
            background: var(--surface);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
        }

        .logo { font-size: 24px; color: var(--accent); text-shadow: 0 0 15px rgba(245, 166, 35, 0.3); }
        .header-btns { display: flex; gap: 15px; align-items: center; }

        main { flex: 1; overflow-y: auto; padding: 15px 15px 130px; position: relative; scroll-behavior: smooth; }

        /* --- TASK CONTAINER & MODERN CARDS --- */
        .task-container {
            position: relative;
            margin-bottom: 15px;
            border-radius: 16px;
            overflow: hidden;
            background: #000;
        }

        .swipe-action {
            position: absolute;
            top: 0; bottom: 0; width: 100%;
            display: flex; align-items: center;
            padding: 0 25px; font-weight: 700; font-size: 13px;
            color: white; z-index: 1;
        }
        .swipe-done { background: var(--green); justify-content: flex-start; }
        .swipe-delete { background: var(--red); justify-content: flex-end; }

        .task-card {
            background: var(--card);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            padding: 18px;
            border: 1px solid var(--border);
            border-left: 5px solid #555;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            z-index: 2;
            transition: transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        .task-info { flex: 1; padding-right: 10px; }
        .task-desc { font-size: 16px; font-weight: 500; margin-bottom: 6px; line-height: 1.4; color: #fff; }
        .task-meta { font-size: 11px; color: var(--muted); display: flex; gap: 8px; align-items: center; flex-wrap: wrap; }

        /* --- CONTACT & UTILS --- */
        .contact-btns { display: flex; gap: 10px; align-items: center; }
        .c-btn {
            width: 40px; height: 40px; border-radius: 12px;
            display: flex; align-items: center; justify-content: center;
            background: rgba(255,255,255,0.05); border: 1px solid var(--border);
            text-decoration: none; font-size: 18px; transition: 0.2s;
        }
        .c-wa { color: #25D366; }
        .c-tel { color: #3b82f6; }
        .c-restore { color: var(--accent); font-size: 20px; }

        /* --- CHECKBOX --- */
        .checkbox-container { width: 30px; height: 30px; flex-shrink: 0; margin-left: 5px; }
        input[type="checkbox"] {
            all: unset !important; width: 26px !important; height: 26px !important;
            background-color: rgba(255,255,255,0.1) !important; border: 1px solid var(--border) !important;
            border-radius: 8px !important; position: relative !important; display: block !important;
        }
        input[type="checkbox"]:checked { background-color: var(--green) !important; border-color: var(--green) !important; }
        input[type="checkbox"]:checked::after { content: '‚úì' !important; position: absolute !important; color: #000; font-size: 18px; font-weight: bold; left: 50%; top: 50%; transform: translate(-50%, -50%); }

        /* --- NAVIGATION --- */
        .bottom-nav {
            position: fixed; bottom: 0; width: 100%; max-width: 500px; left: 50%; transform: translateX(-50%);
            background: var(--surface); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border-top: 1px solid var(--border);
            display: flex; padding: 12px 0 calc(12px + var(--safe-bottom)); z-index: 200;
        }
        .nav-item { flex: 1; text-align: center; color: var(--muted); font-size: 10px; font-weight: 600; cursor: pointer; transition: 0.3s; }
        .nav-item.active { color: var(--accent); transform: translateY(-2px); }
        .nav-icon { font-size: 24px; display: block; margin-bottom: 4px; }

        .fab {
            position: fixed; bottom: calc(90px + var(--safe-bottom)); right: 20px;
            width: 64px; height: 64px; background: linear-gradient(135deg, var(--accent), #e67e22);
            border-radius: 22px; display: flex; align-items: center; justify-content: center;
            font-size: 35px; color: #000; border: none; z-index: 150; 
            box-shadow: 0 10px 25px rgba(230, 126, 34, 0.4);
        }

        /* --- MODALS --- */
        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.4); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); display: none; align-items: flex-end; z-index: 1000; }
        .modal-overlay.open { display: flex; }
        .modal { 
            background: #161618; width: 100%; max-width: 500px; margin: 0 auto; 
            border-radius: 32px 32px 0 0; padding: 35px 25px calc(40px + var(--safe-bottom));
            border-top: 1px solid var(--border);
            box-shadow: 0 -10px 40px rgba(0,0,0,0.5);
        }
        input:not([type="checkbox"]), select, textarea { 
            width: 100%; background: rgba(255,255,255,0.05); border: 1px solid var(--border); 
            color: white; padding: 15px; border-radius: 14px; font-size: 16px; margin-bottom: 15px;
        }
        .btn-save { background: var(--accent); color: black; width: 100%; padding: 18px; border: none; border-radius: 16px; font-weight: 700; font-size: 17px; }

        /* --- CATEGORIES GRID --- */
        .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; }
        .cat-card { 
            background: var(--card); border: 1px solid var(--border); padding: 25px 5px; 
            border-radius: 24px; text-align: center; position: relative; transition: 0.2s;
        }
        .cat-card:active { transform: scale(0.95); background: rgba(255,255,255,0.05); }
        .cat-card i { font-size: 32px; display: block; margin-bottom: 10px; }
        .cat-name { font-size: 11px; font-weight: 700; text-transform: uppercase; color: var(--muted); }
        .cat-badge { position: absolute; top: -5px; right: -5px; background: var(--accent); color: #000; font-size: 10px; padding: 3px 8px; border-radius: 12px; font-weight: 800; border: 3px solid #09090b; }

        .section-title { font-size: 13px; color: var(--accent); margin: 30px 0 15px; border-bottom: 1px solid var(--border); padding-bottom: 8px; text-transform: uppercase; font-weight: 700; }
        .date-badge { padding: 4px 8px; border-radius: 7px; font-weight: 600; font-size: 10px; background: rgba(255,255,255,0.1); }
        .overdue { background: rgba(239, 68, 68, 0.15); color: #ef4444; border: 1px solid rgba(239, 68, 68, 0.3); }
        .today { background: rgba(245, 166, 35, 0.15); color: #f5a623; border: 1px solid rgba(245, 166, 35, 0.3); }

        .filter-btn { background: var(--card); border: 1px solid var(--border); color: var(--muted); padding: 10px 20px; border-radius: 25px; font-size: 13px; margin-right: 10px; white-space: nowrap; font-weight: 600; }
        .filter-btn.active { background: var(--accent); color: black; box-shadow: 0 4px 12px rgba(245, 166, 35, 0.3); }
    </style>
</head>
<body>

    <header>
        <div class="logo bebas">PROHORECA <span id="header-title" style="color:#fff; opacity:0.6; margin-left:8px; font-size: 18px;">TIMELINE</span></div>
        <div class="header-btns">
            <div id="total-count" style="background: var(--accent); color: #000; padding: 2px 10px; border-radius: 20px; font-weight: 800; font-size: 12px;">0</div>
            <span onclick="app.showSettings()" style="font-size: 24px; cursor: pointer;">‚öôÔ∏è</span>
        </div>
    </header>

    <main id="app-shell"></main>

    <nav class="bottom-nav">
        <div class="nav-item active" onclick="app.setPage('timeline')">
            <span class="nav-icon">üìä</span> TIMELINE
        </div>
        <div class="nav-item" onclick="app.setPage('categories')">
            <span class="nav-icon">üóÇÔ∏è</span> KATEGORIJE
        </div>
        <div class="nav-item" onclick="app.setPage('archive')">
            <span class="nav-icon">‚úÖ</span> ARHIVA
        </div>
    </nav>

    <button class="fab" onclick="ui.openModal()">+</button>

    <!-- MODAL ZADATAK -->
    <div class="modal-overlay" id="modal-overlay">
        <div class="modal">
            <h2 class="bebas" id="modal-heading" style="margin-bottom:25px; color:var(--accent);">ZADATAK</h2>
            <input type="hidden" id="task-id">
            <input type="text" id="task-desc" placeholder="Opis zadatka...">
            
            <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                <input type="tel" id="task-phone" placeholder="Broj telefona" style="margin-bottom:0">
                <button onclick="app.pickContact()" style="background: var(--border); border:none; padding: 0 20px; border-radius: 14px; font-size: 22px;">üë§</button>
            </div>

            <select id="task-cat"></select>
            <div style="display:flex; gap:12px;">
                <input type="date" id="task-date" style="flex:1">
                <select id="task-priority" style="flex:1">
                    <option value="normal">Normalno</option>
                    <option value="hitno">üö® HITNO</option>
                </select>
            </div>
            <button class="btn-save" onclick="app.saveTask()">SAƒåUVAJ ZADATAK</button>
            <button onclick="ui.closeModal()" style="background:none; border:none; color:var(--muted); width:100%; margin-top:20px; font-weight:600;">ODUSTANI</button>
        </div>
    </div>

    <!-- SETTINGS MODAL -->
    <div class="modal-overlay" id="settings-overlay">
        <div class="modal">
            <h2 class="bebas" style="margin-bottom:20px; color:var(--accent);">PODE≈†AVANJA</h2>
            <button class="btn-save" onclick="app.exportData()" style="background: var(--blue); margin-bottom: 12px; color: #fff;">üì¶ BACKUP (IZVEZI)</button>
            <button class="btn-save" onclick="document.getElementById('import-file').click()" style="background: var(--green); color: #fff;">üì• IMPORT (UƒåITAJ)</button>
            <input type="file" id="import-file" style="display:none" onchange="app.importData(event)">
            <button onclick="document.getElementById('settings-overlay').classList.remove('open')" style="background:none; border:none; color:var(--muted); width:100%; margin-top:25px;">ZATVORI</button>
        </div>
    </div>

    <script>
        const CATS = {
            upiti: { n: 'Upiti & Ponude', i: 'üìß', c: '#3498db' },
            projekti: { n: 'Projekti & Monta≈æa', i: 'üèóÔ∏è', c: '#e67e22' },
            obilazak: { n: 'Obilazak', i: 'üöó', c: '#2ecc71' },
            aqua: { n: 'Aqua', i: 'üíß', c: '#00cec9' },
            pv: { n: 'PV', i: '‚òÄÔ∏è', c: '#fdcb6e' },
            finansije: { n: 'Finansije', i: 'üí∞', c: '#f1c40f' },
            privatno: { n: 'Privatno', i: 'üè†', c: '#e84393' },
            dobavljaci: { n: 'Dobavljaƒçi', i: 'üì¶', c: '#9b59b6' },
            vozila: { n: 'Vozni park', i: 'üöö', c: '#e74c3c' },
            opsti: { n: 'Op≈°te', i: 'üìù', c: '#7f8c8d' }
        };

        let tasks = JSON.parse(localStorage.getItem('pro_tasks')) || [];
        let currentPage = 'timeline';
        let currentCat = null;
        let timelineFilter = 'sve';

        const app = {
            setPage(page, cat = null) {
                currentPage = page; currentCat = cat;
                document.querySelectorAll('.nav-item').forEach((el, i) => {
                    el.classList.toggle('active', (page==='timeline' && i===0) || (['categories','category'].includes(page) && i===1) || (page==='archive' && i===2));
                });
                this.render();
            },
            async pickContact() {
                if (!('contacts' in navigator)) return alert('Nije podr≈æano.');
                try {
                    const contacts = await navigator.contacts.select(['name', 'tel'], { multiple: false });
                    if (contacts.length && contacts[0].tel.length) {
                        document.getElementById('task-phone').value = contacts[0].tel[0];
                        if (!document.getElementById('task-desc').value) document.getElementById('task-desc').value = contacts[0].name[0];
                    }
                } catch (e) {}
            },
            saveTask() {
                const desc = document.getElementById('task-desc').value.trim();
                if (!desc) return;
                const id = document.getElementById('task-id').value;
                const task = {
                    id: id || Date.now().toString(),
                    desc, phone: document.getElementById('task-phone').value,
                    cat: document.getElementById('task-cat').value,
                    date: document.getElementById('task-date').value,
                    priority: document.getElementById('task-priority').value,
                    done: false, deleted: false
                };
                if (id) {
                    const idx = tasks.findIndex(t => t.id === id);
                    task.done = tasks[idx].done;
                    task.deleted = tasks[idx].deleted;
                    tasks[idx] = task;
                } else { tasks.push(task); }
                this.sync(); ui.closeModal();
            },
            sync() { localStorage.setItem('pro_tasks', JSON.stringify(tasks)); this.render(); },
            render() {
                const shell = document.getElementById('app-shell');
                document.getElementById('total-count').innerText = tasks.filter(t => !t.done && !t.deleted).length;
                shell.innerHTML = '';
                if (currentPage === 'timeline') this.renderTimeline(shell);
                else if (currentPage === 'categories') this.renderGrid(shell);
                else if (currentPage === 'category') this.renderCategory(shell);
                else if (currentPage === 'archive') this.renderArchive(shell);
                this.initSwipe();
            },
            renderTimeline(el) {
                const today = new Date().toISOString().split('T')[0];
                let active = tasks.filter(t => !t.done && t.date && !t.deleted);
                if(timelineFilter === 'danas') active = active.filter(t => t.date === today);
                if(timelineFilter === 'hitno') active = active.filter(t => t.priority === 'hitno');

                el.innerHTML = `<div style="display:flex; overflow-x:auto; margin-bottom:20px; padding-bottom:5px; scrollbar-width:none;">
                    <div class="filter-btn ${timelineFilter==='sve'?'active':''}" onclick="app.setFilter('sve')">SVE</div>
                    <div class="filter-btn ${timelineFilter==='danas'?'active':''}" onclick="app.setFilter('danas')">DANAS</div>
                    <div class="filter-btn ${timelineFilter==='hitno'?'active':''}" onclick="app.setFilter('hitno')">üö® HITNO</div>
                </div>`;

                const overdue = active.filter(t => t.date < today).sort((a,b) => a.date > b.date ? 1 : -1);
                const isToday = active.filter(t => t.date === today);
                const upcoming = active.filter(t => t.date > today).sort((a,b) => a.date > b.date ? 1 : -1);

                if (overdue.length) el.innerHTML += `<div class="section-title bebas">ISTEKLO</div>` + overdue.map(t => this.taskHTML(t)).join('');
                if (isToday.length) el.innerHTML += `<div class="section-title bebas">DANAS</div>` + isToday.map(t => this.taskHTML(t)).join('');
                if (upcoming.length) el.innerHTML += `<div class="section-title bebas">USKORO</div>` + upcoming.map(t => this.taskHTML(t)).join('');
            },
            renderGrid(el) {
                let html = '<div class="grid">';
                for (let k in CATS) {
                    const c = tasks.filter(t => t.cat === k && !t.done && !t.deleted).length;
                    html += `<div class="cat-card" onclick="app.setPage('category', '${k}')">${c > 0 ? `<div class="cat-badge">${c}</div>` : ''}<i>${CATS[k].i}</i><div class="cat-name">${CATS[k].n}</div></div>`;
                }
                el.innerHTML = html + '</div>';
            },
            renderCategory(el) {
                const catTasks = tasks.filter(t => t.cat === currentCat && !t.done && !t.deleted);
                el.innerHTML = catTasks.length ? catTasks.map(t => this.taskHTML(t)).join('') : '<div style="text-align:center; padding:50px; color:var(--muted)">ƒåISTO!</div>';
            },
            renderArchive(el) {
                const done = tasks.filter(t => t.done && !t.deleted);
                const deleted = tasks.filter(t => t.deleted);
                
                let html = '';
                if(done.length) {
                    html += `<div class="section-title bebas">ZAVR≈†ENO</div>` + done.slice(-20).reverse().map(t => this.taskHTML(t)).join('');
                }
                if(deleted.length) {
                    html += `<div class="section-title bebas" style="color:var(--red)">SMEƒÜE (RECYCLE BIN)</div>` + deleted.map(t => this.taskHTML(t, true)).join('');
                }
                el.innerHTML = html || '<div style="text-align:center; padding:50px; color:var(--muted)">ARHIVA JE PRAZNA.</div>';
            },
            taskHTML(t, isTrash = false) {
                const today = new Date().toISOString().split('T')[0];
                const ds = t.date < today ? 'overdue' : (t.date === today ? 'today' : '');
                const days = ['Ned', 'Pon', 'Uto', 'Sre', 'ƒået', 'Pet', 'Sub'];
                const dayName = t.date ? `(${days[new Date(t.date).getDay()]})` : '';
                const cleanPhone = t.phone ? t.phone.replace(/[^0-9+]/g, '') : '';
                const waLink = `https://wa.me/${cleanPhone.startsWith('0') ? '381'+cleanPhone.substring(1) : cleanPhone}?text=${encodeURIComponent('Podsetnik: ' + t.desc)}`;

                return `
                    <div class="task-container" data-id="${t.id}">
                        ${!isTrash ? `
                            <div class="swipe-action swipe-done">GOTOVO ‚úì</div>
                            <div class="swipe-action swipe-delete">OBRI≈†I ‚úï</div>
                        ` : ''}
                        <div class="task-card" style="border-left-color:${CATS[t.cat].c}; opacity:${t.done || t.deleted ? 0.6 : 1}; ${t.deleted ? 'transform: none !important;' : ''}" onclick="${!t.deleted ? `ui.openModal('${t.id}')` : ''}">
                            <div class="task-info">
                                <div class="task-desc" style="${t.done || t.deleted ? 'text-decoration:line-through' : ''}">${t.desc}</div>
                                <div class="task-meta">
                                    <span style="color:${CATS[t.cat].c}; font-weight:700;">${CATS[t.cat].i} ${CATS[t.cat].n}</span>
                                    ${t.date ? `<span class="date-badge ${ds}">${t.date.split('-')[2]}.${t.date.split('-')[1]}. ${dayName}</span>` : ''}
                                    ${t.priority === 'hitno' ? `<span style="color:var(--red); font-weight:bold;">üö® HITNO</span>` : ''}
                                </div>
                            </div>
                            <div class="contact-btns">
                                ${t.deleted ? `<span class="c-btn c-restore" onclick="event.stopPropagation(); app.restoreTask('${t.id}')">‚Ü©Ô∏è</span>` : ''}
                                ${t.phone && !t.deleted ? `
                                    <a href="tel:${cleanPhone}" class="c-btn c-tel" onclick="event.stopPropagation()">üìû</a>
                                    <a href="${waLink}" target="_blank" class="c-btn c-wa" onclick="event.stopPropagation()">üí¨</a>
                                ` : ''}
                                ${!t.deleted ? `
                                    <div class="checkbox-container">
                                        <input type="checkbox" ${t.done?'checked':''} onclick="event.stopPropagation(); app.toggleTask('${t.id}')">
                                    </div>
                                ` : ''}
                                ${isTrash ? `<span class="c-btn" style="color:var(--red)" onclick="event.stopPropagation(); app.permaDelete('${t.id}')">üóë</span>` : ''}
                            </div>
                        </div>
                    </div>`;
            },
            setFilter(f) { timelineFilter = f; this.render(); },
            toggleTask(id) {
                const t = tasks.find(x => x.id === id);
                if(t) { t.done = !t.done; this.sync(); }
            },
            deleteTask(id) {
                const t = tasks.find(x => x.id === id);
                if(t) { t.deleted = true; this.sync(); }
            },
            restoreTask(id) {
                const t = tasks.find(x => x.id === id);
                if(t) { t.deleted = false; this.sync(); }
            },
            permaDelete(id) {
                if(confirm('Trajno obrisati?')) {
                    tasks = tasks.filter(t => t.id !== id);
                    this.sync();
                }
            },
            exportData() {
                const dataStr = JSON.stringify(tasks);
                const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
                const link = document.createElement('a');
                link.setAttribute('href', dataUri);
                link.setAttribute('download', 'prohoreca_backup.json');
                link.click();
            },
            importData(e) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    try {
                        tasks = JSON.parse(e.target.result);
                        this.sync();
                    } catch(err) { alert('Gre≈°ka.'); }
                };
                reader.readAsText(e.target.files[0]);
            },
            showSettings() { document.getElementById('settings-overlay').classList.add('open'); },
            initSwipe() {
                if (currentPage === 'archive') return; // Iskljuƒçi swipe u arhivi zbog stabilnosti
                document.querySelectorAll('.task-container').forEach(container => {
                    const card = container.querySelector('.task-card');
                    let startX = 0, currentX = 0;
                    container.addEventListener('touchstart', e => { startX = e.touches[0].clientX; card.style.transition = 'none'; }, {passive: true});
                    container.addEventListener('touchmove', e => {
                        currentX = e.touches[0].clientX - startX;
                        if (currentX > 0) { container.querySelector('.swipe-done').style.opacity = 1; container.querySelector('.swipe-delete').style.opacity = 0; }
                        else { container.querySelector('.swipe-done').style.opacity = 0; container.querySelector('.swipe-delete').style.opacity = 1; }
                        card.style.transform = `translateX(${currentX}px)`;
                    }, {passive: true});
                    container.addEventListener('touchend', () => {
                        card.style.transition = 'transform 0.4s cubic-bezier(0.2, 0.8, 0.2, 1)';
                        const id = container.getAttribute('data-id');
                        if (currentX > 140) app.toggleTask(id);
                        else if (currentX < -140) app.deleteTask(id);
                        card.style.transform = `translateX(0px)`;
                        currentX = 0;
                    });
                });
            }
        };

        const ui = {
            openModal(id = null) {
                const catSel = document.getElementById('task-cat');
                catSel.innerHTML = Object.entries(CATS).map(([k,v]) => `<option value="${k}" ${currentCat===k?'selected':''}>${v.i} ${v.n}</option>`).join('');
                if (id) {
                    const t = tasks.find(x => x.id === id);
                    document.getElementById('task-id').value = t.id;
                    document.getElementById('task-desc').value = t.desc;
                    document.getElementById('task-phone').value = t.phone || '';
                    document.getElementById('task-cat').value = t.cat;
                    document.getElementById('task-date').value = t.date;
                    document.getElementById('task-priority').value = t.priority;
                    document.getElementById('modal-heading').innerText = 'IZMENI';
                } else {
                    document.getElementById('task-id').value = '';
                    document.getElementById('task-desc').value = '';
                    document.getElementById('task-phone').value = '';
                    document.getElementById('task-date').value = '';
                    document.getElementById('task-priority').value = 'normal';
                    document.getElementById('modal-heading').innerText = 'NOVI ZADATAK';
                }
                document.getElementById('modal-overlay').classList.add('open');
            },
            closeModal() { document.getElementById('modal-overlay').classList.remove('open'); }
        };

        app.render();
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => { navigator.serviceWorker.register('./sw.js'); });
        }
    </script>
</body>
</html>